@using Pl.Sas.Core
@using Pl.Sas.Core.Entities
@using Pl.Sas.Infrastructure
@model MarketListViewModel
@for (int i = 0; i < Model.StockViews.Count; i++)
{
    var view = Model.StockViews[i];
    <tr>
        <td class="s-c text-white" fo="@(Model.UserFollowSymbols.Contains(view.Symbol) ? "1" : "0")" title="@view.Description">@view.Symbol</td>

        <td class="text-right @view.MacroeconomicsScore.GetTextColorCss(0)">@view.MacroeconomicsScore.ToString("0")</td>
        <td class="text-right @view.IndustryRank.GetTextColorCss(0)">@view.IndustryRank.ToString("0")</td>

        <td class="text-right @view.CompanyValueScore.GetRangeTextColorCss(0, 5)" title="Vốn hóa: @view.MarketCap.ShowPercent(), Roe: @view.Roe.ShowPercent(), Roa: @view.Roa.ShowPercent()">@view.CompanyValueScore.ToString("0")</td>
        <td class="text-right">@view.Eps.ShowMoney(1)</td>
        <td class="text-right">@view.Pe.ShowPercent()</td>
        <td class="text-right">@view.Pb.ShowPercent()</td>

        <td class="text-right @view.CompanyGrowthScore.GetRangeTextColorCss(0, 15)">@view.CompanyGrowthScore.ToString("0")</td>
        <td class="text-right @view.YearlyRevenueGrowthPercent.GetTextColorCss(Model.BankInterestRate12)">@view.YearlyRevenueGrowthPercent.ShowPercent()</td>
        <td class="text-right @view.YearlyProfitGrowthPercent.GetTextColorCss(Model.BankInterestRate12)">@view.YearlyProfitGrowthPercent.ShowPercent()</td>

        <td class="text-right @view.StockScore.GetRangeTextColorCss(-2, 1)">@view.StockScore.ToString("0")</td>
        <td class="text-right">@view.Beta.ShowPercent()</td>
        <td class="text-right @view.LastTotalMatchVol.GetTextColorCss(view.LastOneTotalMatchVol)" title="Phiên trước @view.LastOneTotalMatchVol.ShowMoney(1), TB 3P @view.LastAvgThreeTotalMatchVol.ShowMoney(1) (@view.ThreeTotalMatchVolPercent.ShowPercent()%), TB 5P @view.LastAvgFiveTotalMatchVol.ShowMoney(1) (@view.FiveTotalMatchVolPercent.ShowPercent()%), TB 10P @view.LastAvgTenTotalMatchVol.ShowMoney(1) (@view.TenTotalMatchVolPercent.ShowPercent()%)">
            @view.LastTotalMatchVol.ShowMoney(1)
        </td>
        <td class="text-right @view.LastClosePrice.GetTextColorCss(view.LastOneClosePrice)" title="Phiên trước @view.LastOneClosePrice.ShowPrice(), @view.GetClosePriceTrend">
            @view.LastClosePrice.ShowPrice()
        </td>
        <td class="text-right @view.PricePercentConvulsion1.GetTextColorCss()">@view.PricePercentConvulsion1.ShowPercent()</td>
        <td class="text-right @view.PricePercentConvulsion5.GetTextColorCss()">@view.PricePercentConvulsion5.ShowPercent()</td>
        <td class="text-right @view.PricePercentConvulsion10.GetTextColorCss()">@view.PricePercentConvulsion10.ShowPercent()</td>
        <td class="text-right @view.PricePercentConvulsion30.GetTextColorCss()">@view.PricePercentConvulsion30.ShowPercent()</td>

        <td class="text-right @view.FiinScore.GetTextColorCss()">@view.FiinScore.ToString("0")</td>
        <td class="text-right @view.VndScore.GetTextColorCss()">@view.VndScore.ToString("0")</td>
        <td class="text-right @view.TargetPrice.GetTextColorCss(view.LastClosePrice / 1000)">@view.TargetPrice.ShowPriceZezoToNull(1)</td>

        <td class="text-right @judgeResult.ProfitPercent.GetTextColorCss(Model.BankInterestRate12)">@judgeResult.ProfitPercent.ShowPercent()</td>
        <td class="text-right @view.PricePercentConvulsionStartTrading.GetTextColorCss(Model.BankInterestRate12)">@view.PricePercentConvulsionStartTrading.ShowPercent()</td>
        <td class="text-right @judgeResult.ProfitPercent.GetTextColorCss(Model.BankInterestRate12)">@judgeResult.ProfitPercent.ShowPercent()</td>
        <td class="text-right @view.PricePercentConvulsionStartTrading.GetTextColorCss(Model.BankInterestRate12)">@view.PricePercentConvulsionStartTrading.ShowPercent()</td>

        @if (judgeResult.TodayIsBuy)
        {
            <td class="text-danger" title="@judgeResult.OptimalBuyPrice.GetPercent(view.LastClosePrice).ShowPercent()%">Mua(@judgeResult.OptimalBuyPrice.ShowPrice(1))</td>
        }
        else
        {
            <td title="@judgeResult.OptimalBuyPrice.GetPercent(view.LastClosePrice).ShowPercent()%">TD(@judgeResult.OptimalBuyPrice.ShowPrice(1))</td>
        }
        @if (judgeResult.TodayIsSell)
        {
            <td class="text-success" title="@judgeResult.OptimalSellPrice.GetPercent(view.LastClosePrice).ShowPercent()%">Bán(@judgeResult.OptimalSellPrice.ShowPrice(1))</td>
        }
        else
        {
            <td title="@judgeResult.OptimalSellPrice.GetPercent(view.LastClosePrice).ShowPercent()%">TD(@judgeResult.OptimalSellPrice.ShowPrice(1))</td>
        }
    </tr>
}