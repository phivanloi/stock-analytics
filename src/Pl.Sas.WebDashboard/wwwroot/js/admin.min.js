function OpenToast(n){$(document).Toasts("create",{title:"Thông báo",body:n,delay:5e3,autohide:!0,position:"bottomRight"})}function OpenModalDetails(n,t,i){var u=n,r;t!=""&&(u+=" ("+t+")");i==""?($("#remove-follow").hide(),$("#add-follow").hide()):i=="1"?($("#remove-follow").show(),$("#add-follow").hide()):($("#add-follow").show(),$("#remove-follow").hide());$("#follow-symbol").val(n);$("#stock-details-title").text("Chi tiết - "+u);r="/home/stockdetails?symbol="+n;$("#stock-details-body").html('<iframe src="'+r+'" class="embed-responsive-item" frameborder="0"><\/iframe>');$("#stock-details-link").prop("href",r);$("#stock-details-modal").modal("toggle")}function ToggleFollow(){var n=$("#follow-symbol").val();$.ajax({cache:!1,type:"GET",contentType:"application/json",dataType:"json",url:"/home/togglefollow?symbol="+n,success:function(n){n.status==1?OpenToast('<span class="text-success">'+n.message+"<\/span>"):OpenToast('<span class="text-danger">'+n.message+"<\/span>");$("#stock-details-modal").modal("toggle")},error:function(){console.log("ToggleFollow error")}})}$(function(){async function t(){try{await n.start();console.log("Realtime stock connected.")}catch(i){console.log(i);setTimeout(t,5e3)}}const n=(new signalR.HubConnectionBuilder).withUrl("/stockrealtime").withAutomaticReconnect().build();n.on("UpdateStockView",()=>{LoadMarket()});n.on("UpdateRealtimeView",n=>{var t=JSON.parse(n);$("#"+t.smb+" .c-epp").text(t.cepp);$("#"+t.smb+" .c-eap").text(t.ceap);$("#"+t.smb+" .c-mpp").text(t.cmpp);$("#"+t.smb+" .c-map").text(t.cmap);$("#"+t.smb+" .c-app").text(t.capp);$("#"+t.smb+" .c-aap").text(t.caap);$("#"+t.smb+" .c-bpp").text(t.cbpp);$("#"+t.smb+" .c-bap").text(t.cbap);$("#"+t.smb+" .c-lcp").text(t.clcp);console.log(t)});n.onclose(async()=>{await start()});t();$(document).on("click",".s-c",function(n){OpenModalDetails(n.target.innerText,n.target.attributes.title.nodeValue,n.target.attributes.fo.nodeValue)})});